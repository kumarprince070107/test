{"version":3,"file":"Docs-ZC7OVyd3.js","sources":["../../../frontend/src/pages/docs/Docs.tsx"],"sourcesContent":["import react, { useState, useEffect } from \"react\";\r\nimport {deleteUploadedFileApi, listUploadedFilesApi } from \"../../api\";\r\nimport { Button } from \"@fluentui/react-components\";\r\nimport { Delete24Regular } from \"@fluentui/react-icons\";\r\nimport {  Text } from \"@fluentui/react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { getToken } from \"../../authConfig\";\r\nimport { useMsal } from \"@azure/msal-react\";\r\nimport styles from \"../../components/UploadFile/UploadFile.module.css\";\r\n\r\nexport function Component(): JSX.Element {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [deletionStatus, setDeletionStatus] = useState({});\r\n    const [uploadedFiles, setUploadedFiles] = useState<string[]>([]);\r\n    const { t } = useTranslation();\r\n    const listUploadedFiles = async idToken => {\r\n        listUploadedFilesApi(idToken).then(files => {\r\n            setIsLoading(false);\r\n            setDeletionStatus({});\r\n            setUploadedFiles(files);\r\n        });\r\n    };\r\n    const client = useMsal().instance;\r\n\r\n    const handleRemoveFile = async (filename: string) => {\r\n        setDeletionStatus({ ...deletionStatus, [filename]: \"pending\" });\r\n\r\n        try {\r\n            const idToken = await getToken(client);\r\n            if (!idToken) {\r\n                throw new Error(\"No authentication token available\");\r\n            }\r\n\r\n            await deleteUploadedFileApi(filename, idToken);\r\n            setDeletionStatus({ ...deletionStatus, [filename]: \"success\" });\r\n            listUploadedFiles(idToken);\r\n        } catch (error) {\r\n            setDeletionStatus({ ...deletionStatus, [filename]: \"error\" });\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const getfiles = async () => {\r\n            try {\r\n                const idToken = await getToken(client);\r\n                if (!idToken) {\r\n                    throw new Error(\"No authentication token available\");\r\n                }\r\n                listUploadedFiles(idToken);\r\n            } catch (error) {\r\n                console.error(error);\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n        getfiles();\r\n    }, []);\r\n    return (\r\n        <div>\r\n            <h3>{t(\"upload.uploadedFilesLabel\")}</h3>\r\n\r\n            {isLoading && <Text>{t(\"upload.loading\")}</Text >}\r\n            <div>\r\n                {!isLoading && uploadedFiles.length === 0 && <Text style={{\r\n\r\n                    color: \"white\"\r\n                }} >{t(\"upload.noFilesUploaded\")}</Text>}\r\n            </div >\r\n            {\r\n                uploadedFiles.map((filename, index) => {\r\n                    return (\r\n                        <div\r\n                            key={index}\r\n                            style={{\r\n                                display: \"flex\",\r\n                                justifyContent: \"space-between\",\r\n                                alignItems: \"center\",\r\n                                padding: \"20px\",\r\n                                borderBottom: \"1px solid #ccc\",\r\n                                width: \"80%\",\r\n                                color: \"white\"\r\n                            }}\r\n                        >\r\n                            <div\r\n                                style={{\r\n                                    fontSize: \"16px\",\r\n                                    fontWeight: \"bold\",\r\n                                    color: \"white\"\r\n                                }}\r\n                            >\r\n                                {filename}\r\n                            </div>\r\n                            {/* Button to remove a file from the list */}\r\n                            <div\r\n                                style={{\r\n                                    display: \"flex\",\r\n                                    justifyContent: \"space-between\",\r\n                                    alignItems: \"center\",\r\n                                    color: \"white\"\r\n                                }}\r\n                            >\r\n                                <Button\r\n                                    icon={<Delete24Regular />}\r\n                                    onClick={() => handleRemoveFile(filename)}\r\n                                    disabled={deletionStatus[filename] === \"pending\" || deletionStatus[filename] === \"success\"}\r\n                                >\r\n                                    {!deletionStatus[filename] && t(\"upload.deleteFile\")}\r\n                                    {deletionStatus[filename] == \"pending\" && t(\"upload.deletingFile\")}\r\n                                    {deletionStatus[filename] == \"error\" && t(\"upload.errorDeleting\")}\r\n                                    {deletionStatus[filename] == \"success\" && t(\"upload.fileDeleted\")}\r\n                                </Button>\r\n                                {/* <Button to go to chat page */}\r\n                                <Button\r\n                                    onClick={\r\n                                        // navigate to chat page\r\n                                        () => {\r\n                                            window.location.href = \"/\";\r\n                                        }\r\n                                    }\r\n                                    style={{\r\n                                        backgroundColor: \"black\",\r\n                                        color: \"white\"\r\n                                    }}\r\n                                >\r\n                                    {/* {<Chat24Regular />} */}\r\n                                    Chat\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })\r\n            }\r\n        </div >\r\n    );\r\n}\r\n\r\nComponent.displayName = \"Docs\";\r\n"],"names":["Component","isLoading","setIsLoading","useState","deletionStatus","setDeletionStatus","uploadedFiles","setUploadedFiles","t","useTranslation","listUploadedFiles","idToken","listUploadedFilesApi","files","client","useMsal","handleRemoveFile","filename","getToken","deleteUploadedFileApi","error","useEffect","jsx","Text","index","jsxs","Button","Delete24Regular"],"mappings":"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"}